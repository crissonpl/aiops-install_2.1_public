
source ./demo/01_config.sh

clear
get_sed


echo "${CYAN}***************************************************************************************************************************************************"
echo "${CYAN}***************************************************************************************************************************************************"
echo "${CYAN}***************************************************************************************************************************************************"
echo "${CYAN}***************************************************************************************************************************************************"
echo "${CYAN}"
echo "${CYAN} ${rocket} AI OPS Demo - Check Prerequisites${NC}"
echo "${CYAN}"
echo "${CYAN}***************************************************************************************************************************************************"
echo "${CYAN}***************************************************************************************************************************************************"
echo "${CYAN}***************************************************************************************************************************************************"


echo "${NC}  Initializing......"

echo "  ${CYAN}Checking Config File......${NC}"

 if [[ $appgroupid1 =~ "not_configured" ]];
  then
      echo "      ERROR: Please copy the 01_config.sh file that you have received by mail into this ./demo folder"
      echo "           ${RED}${cross} Aborting."
      exit 1
  else 
      echo "      ${GREEN}OK${NC}"
  fi






echo "  ${CYAN}Checking NOI WebHooks......${NC}"


  checkConnection=$(curl --insecure -X "POST" "$NETCOOL_WEBHOOK_HUMIO" -H 'Content-Type: application/json; charset=utf-8' -H 'Cookie: d291eb4934d76f7f45764b830cdb2d63=90c3dffd13019b5bae8fd5a840216896') 


 if [[ $checkConnection =~ "Cannot read property" ]];
  then
      echo "      ${GREEN}OK${NC}"
  else 
      echo "      ERROR: Humio is not accessible"
      echo "           ${RED}${cross} Aborting."
      exit 1
  fi





 echo "  ${CYAN}Checking K8s connection......${NC}"
checkK8sConnection




echo "${CYAN}***************************************************************************************************************************************************"
echo "${CYAN}***************************************************************************************************************************************************"
echo "${CYAN}"
echo "${GREEN} ${rocket} DONE - You're good to go!!!!!${NC}"
echo "${CYAN}"
echo "${CYAN}***************************************************************************************************************************************************"
echo "${CYAN}***************************************************************************************************************************************************"
